<%@ page contentType="text/html;charset=UTF-8" language="java"%>
<%@ page import="java.sql.*"%>
<%
    request.setCharacterEncoding("UTF-8");

// 데이터베이스 연결
String dbURL = "jdbc:oracle:thin:@localhost:1521:xe";
String dbUser = "hr"; // 사용자명
String dbPass = "hr"; // 비밀번호

Connection conn = null;
PreparedStatement pstmt = null;

try {
    // POST 요청으로 받은 파라미터 가져오기
    String title = request.getParameter("title");
    String content = request.getParameter("content");
    String memberId = "memberId"; // 실제 로그인한 사용자의 ID를 세션이나 다른 방식으로 받아와야 함

    // 데이터베이스 연결
    Class.forName("oracle.jdbc.driver.OracleDriver");
    conn = DriverManager.getConnection(dbURL, dbUser, dbPass);

    // 게시글을 BOARD 테이블에 삽입
    String sql = "INSERT INTO BOARD (SEQ, MEMBER_ID, SUBJECT, CONTENT, LOGTIME) VALUES (BOARD_SEQ.NEXTVAL, ?, ?, ?, SYSDATE)";
    pstmt = conn.prepareStatement(sql);
    pstmt.setString(1, memberId);
    pstmt.setString(2, title);
    pstmt.setString(3, content);
    pstmt.executeUpdate();

    // 성공 시 게시판 페이지로 리디렉션
    response.sendRedirect("board.html");
} catch (Exception e) {
    e.printStackTrace();
} finally {
    try { if (pstmt != null) pstmt.close(); } catch (Exception e) {}
    try { if (conn != null) conn.close(); } catch (Exception e) {}
}
%>