<!DOCTYPE html> 
<html lang="en"> 
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0"> 
<title>Document</title>
<link rel="stylesheet" href="../css/common.css"> 
<link rel="stylesheet" href="../css/reset.css">
</head> 
<body>
<h1 class="title">동적 드롭다운</h1> 
<div class="exec">
<form>
<!-- 각 단계별 dropdown을 표시할 span태그 --> 
<span id="category1"></span>
<span id="category2"></span> 
<span id="category3"></span>

<!-- 1depth 카테고리 -->
<select name="category1" id="category1-1">
  <option>----- 선택하세요 -----</option>
  <option value="의류" data-target="#category2-1">의류</option>
  <option value="디지털/가전" data-target="#category2-2">디지털/가전</option>
</select>

<!-- 의류에 종속된 2depth 카테고리 -->
<select name="category2" id="category2-1">
  <option>----- 선택하세요 -----</option>
  <option value="여성의류" data-target="#category2-1-1">여성의류</option>
  <option value="남성의류/캐주얼의류" data-target="#category2-1-2">남성의류/캐주얼의류</option>
</select>

<!-- 디지털/가전 2depth 카테고리 -->
<select name="category2" id="category2-2">
  <option>----- 선택하세요 -----</option>
  <option value="TV/냉장고/세탁기" data-target="#category2-2-1">TV/냉장고/세탁기</option>
  <option value="노트북/데스크탑" data-target="#category2-2-2">노트북/데스크탑</option>
</select>

<!-- 의류 > 여성의류에 종속된 3depth 카테고리 -->
<select name="category3" id="category2-1-1">
  <option>----- 선택하세요 -----</option>
  <option value="티셔츠">티셔츠</option>
  <option value="블라우스/셔츠/남방">블라우스/셔츠/남방</option>
  <option value="가디건">가디건</option>
  <option value="니트/스웨터">니트/스웨터</option>
</select>

<!-- 의류 > 남성의류/캐주얼의류에 종속된 3depth 카테고리 -->
<select name="category3" id="category2-1-2">
  <option>----- 선택하세요 -----</option>
  <option value="캐주얼셔츠/남방">캐주얼셔츠/남방</option>
  <option value="긴팔티/맨투맨신규코너">긴팔티/맨투맨신규코너</option>
  <option value="청바지인기코너">청바지인기코너</option>
  <option value="캐주얼 바지/팬츠">캐주얼 바지/팬츠</option>
</select>

<!-- 디지털/가전 > TV/냉장고/세탁기에 종속된 3depth 카테고리 -->
<select name="category3" id="category2-2-1">
  <option>----- 선택하세요 -----</option>
  <option value="3D TV">3D TV</option>
  <option value="김치냉장고">김치냉장고</option>
  <option value="드럼세탁기">드럼세탁기</option>
</select>

<!-- 디지털/가전 > 노트북/데스크탑에 종속된 3depth 카테고리 -->
<select name="category3" id="category2-2-2">
  <option>----- 선택하세요 -----</option>
  <option value="노트북">노트북</option>
  <option value="브랜드PC">브랜드PC</option>
  <option value="조립PC">조립PC</option>
</select>

</form> 
</div>
<div class="console"></div>
<script src="http://code.jQuery.com/jquery-3.7.1.min.js"></script> 
<script>
$(function(){ 
//1 depth
$('#category1').load('../text/category-data.html #category1-1',function(){ 
$(this).show();
});
//2 depth
$(document).on('change', '#category1 > select', function(){ 
$('#category2, .console').empty();
$('#category3').empty();
var target = $(this).find('option:selected').attr('data-target'); 
console.log('target = ' + target);
$('#category2').load('../text/category-data.html ' + target, function(){ 
$(this).show();
}); 
});
//3 depth
$(document).on('change', '#category2 > select', function(){
$('#category3, .console').empty();
var target = $(this).find('option:selected').attr('data-target'); 
console.log('target = ' + target);
$('#category3').load('../text/category-data.html ' + target, function(){ 
$(this).show();
});
});
//마지막 선택
$(document).on('change', '#category3 > select', function(){ 
if($(this).find('option:selected').index() > 0) {
//var data1 = $('#category1').find('option:selected').val(); 
var data1 = $('#category1 > select > option:selected').val(); 
var data2 = $('#category2 > select > option:selected').val(); 
//var data3 = $(this).find('option:selected').val();
var data3 = $('#category3 > select > option:selected').val(); 
$('.console').html(data1 + ' &gt; ' + data2 + ' &gt; ' + data3);
} 
});
}); 
</script>
</body> 
</html>
<!-- 
* load()
읽어오고자 하는 대상의 내용이 단순한 text나 html 태그를 표현하며 
읽어온 내용을 특정 요소에 출력하는 것만을 목적으로 할 경우 load() 함수를 사용해 코드를 축약할 수 
있다.
$("CSS셀렉터").load(
"읽어올 대상의 URL" 
[, function() { ...읽기에 성공한 후 실행될 함수...}] 
);
예) "readme.html" 파일의 전체 내용 중에서 "#my"라는 id값을 갖는 요소만을 읽어올 경우 
$("출력할 대상의 셀렉터").load("readme.html #my");
-->