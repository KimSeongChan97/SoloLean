package user.service;

import java.util.List;
import java.util.Scanner;

import user.bean.UserDTO;
import user.dao.UserDAO;
import user.main.UserMain;

public class SearchService implements UserService {

    @Override
    public void execute() {
        Scanner scan = new Scanner(System.in);
        UserDAO userDAO = UserDAO.getInstance();

        System.out.println("1. 이름으로 검색");
        System.out.println("2. 아이디로 검색");
        System.out.print("번호 선택 : ");
        int choice = scan.nextInt();

        String column = "";  // 검색할 컬럼 (name 또는 id)
        String value = "";   // 검색할 값

        if (choice == 1) {
            System.out.print("검색을 원하는 이름 입력 : ");
            value = scan.next();  // 이름 입력 받기
            column = "name";  // 이름으로 검색
        } else if (choice == 2) {
            System.out.print("검색을 원하는 아이디 입력 : ");
            value = scan.next();  // 아이디 입력 받기
            column = "id";  // 아이디로 검색
        } else {
            System.out.println("잘못된 선택입니다.");
            return;
        }

        List<UserDTO> userList = userDAO.search(column, value);

        if (userList == null || userList.isEmpty()) {
            System.out.println("해당 조건에 맞는 사용자가 존재하지 않습니다.");
        } else {
            System.out.println("--------검색 결과--------");
            for (UserDTO userDTO : userList) {
                System.out.println("사용자 이름 : " + userDTO.getName());
                System.out.println("사용자 아이디 : " + userDTO.getId());
                System.out.println("사용자 비밀번호 : " + userDTO.getPwd());
                System.out.println("------------------------");
            }
        }
    }
}
