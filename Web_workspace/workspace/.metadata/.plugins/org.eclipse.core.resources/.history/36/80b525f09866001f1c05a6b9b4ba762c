<%@ page contentType="text/html;charset=UTF-8" language="java" %>
<%@ page import="java.sql.*, java.io.*" %>
<%
    String dbURL = "jdbc:oracle:thin:@localhost:1521:xe";
    String dbUser = "hr"; 
    String dbPass = "hr";

    Connection conn = null;
    Statement stmt = null;
    ResultSet rs = null;

    try {
        // 데이터베이스 연결
        Class.forName("oracle.jdbc.driver.OracleDriver");
        conn = DriverManager.getConnection(dbURL, dbUser, dbPass);

        // 게시글 목록 조회 쿼리
        String sql = "SELECT SEQ, SUBJECT, MEMBER_ID, LOGTIME FROM BOARD ORDER BY SEQ DESC";
        stmt = conn.createStatement();
        rs = stmt.executeQuery(sql);

        // 게시글 목록 출력
        while(rs.next()) {
            int seq = rs.getInt("SEQ");
            String subject = rs.getString("SUBJECT");
            String memberId = rs.getString("MEMBER_ID");
            Date logtime = rs.getDate("LOGTIME");

            out.println("<tr>");
            out.println("<td>" + seq + "</td>");
            out.println("<td>" + subject + "</td>");
            out.println("<td>" + memberId + "</td>");
            out.println("<td>" + logtime + "</td>");
            out.println("<td>0</td>"); // 조회수는 0으로 기본 설정
            out.println("<td><a href='view_post.jsp?seq=" + seq + "'>View</a></td>");
            out.println("</tr>");
        }
    } catch (Exception e) {
        out.println("Error: " + e.getMessage());
        e.printStackTrace();
    } finally {
        try { if (rs != null) rs.close(); } catch (Exception e) { e.printStackTrace(); }
        try { if (stmt != null) stmt.close(); } catch (Exception e) { e.printStackTrace(); }
        try { if (conn != null) conn.close(); } catch (Exception e) { e.printStackTrace(); }
    }
%>