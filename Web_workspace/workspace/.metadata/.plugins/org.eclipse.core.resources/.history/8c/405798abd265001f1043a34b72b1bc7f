<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>글쓰기</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <header>
        <nav>
            <img src="images/menubar01.png" alt="메뉴바 이미지">
            <ul>
                <li><a href="index.html">홈</a></li>
                <li><a href="board.html">게시판</a></li>
                <li><a href="register.html">회원가입</a></li>
                <li><a href="login.html">로그인</a></li>
            </ul>
        </nav>
    </header>

    <main>
        <section id="board-write">
            <h2>글쓰기</h2>
            <form action="board_write_process.jsp" method="post">
                <label for="subject">제목:</label>
                <input type="text" id="subject" name="subject" required>
                <label for="content">내용:</label>
                <textarea id="content" name="content" required></textarea>
                <button type="submit">등록</button>
            </form>
        </section>
    </main>

    <div id="back-button" onclick="goBack()">
        <img src="images/back.png" alt="뒤로가기">
    </div>

    <script src="js/script.js"></script>
    <script type="text/javascript" src="http://code.jquery.com/jquery-3.7.1.min.js"></script>
<script type="text/javascript">
$(function(){
	// 게시글 등록 기능
	$('#post-submit').click(function() {
	    var title = $('#post-title').val();
	    var content = $('#post-content').val();

	    if (title && content) {
	        var newPost = {
	            "no": new Date().getTime(),  // 고유 번호 생성
	            "subject": title,
	            "hit": 0,
	            "date": new Date().toLocaleDateString()
	        };

	        // 서버에 데이터 전송
	        $.ajax({
	            type: 'POST',
	            url: 'save_post.jsp', // 데이터 저장을 처리하는 JSP 파일
	            data: JSON.stringify(newPost),
	            contentType: 'application/json',
	            success: function(response) {
	                alert('게시글이 등록되었습니다.');
	                location.href = 'board.html'; // 게시판 목록으로 이동
	            },
	            error: function() {
	                alert('게시글 등록에 실패했습니다.');
	            }
	        });
	    } else {
	        alert('제목과 내용을 입력하세요.');
	    }
	});

});
</script>
</body>
</html>
