<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<link rel="stylesheet" href="../css/common.css">
<link rel="stylesheet" href="../css/reset.css">
</head>
<body>

<h1 class="title">$.ajax() 함수를 사용한 HTML 읽기</h1> 
	<div class="exec">
		<input type="button" value="txt파일 가져오기" id="mybtn"/> 
		<!-- 사용자가 클릭할 수 있는 버튼으로, 클릭 시 서버에서 파일을 가져오는 AJAX 요청이 발생한다. -->
		<!-- 이 버튼은 jQuery의 click 이벤트 핸들러와 연결되어, 클릭 시 비동기적으로 데이터를 서버로부터 가져온다. -->
	</div>
	<div class="console" id="result"></div>
	<!-- 서버에서 받아온 데이터를 출력할 공간으로, AJAX 요청이 성공했을 때 이 div 내에 데이터를 삽입하게 된다. -->
	<!-- 이곳은 사용자가 서버로부터 가져온 텍스트 파일의 데이터를 동적으로 표시하기 위한 영역이다. AJAX 요청이 완료되면 이곳이 업데이트된다. -->
	

<script type="text/javascript" src="http://code.jquery.com/jquery-3.7.1.min.js"></script>
<!-- jQuery 라이브러리를 포함하는 script 태그로, jQuery를 사용하여 AJAX 요청과 DOM 조작을 쉽게 수행할 수 있다. -->
<!-- jQuery는 DOM 요소의 탐색 및 조작을 쉽게 할 수 있도록 도와주며, AJAX와 같은 비동기 요청을 단순하게 처리할 수 있게 해준다. -->

<script type="text/javascript">
$(function(){
	// 문서가 준비된 후에 실행되는 jQuery 함수로, DOM 요소들이 모두 로드된 뒤에 jQuery 코드가 실행되도록 보장한다.
	// 이 코드는 DOM이 완전히 로드된 후에 실행되므로, DOM에 정의된 요소들에 안전하게 접근할 수 있다.
	$('#mybtn').click(function(){
		// 'mybtn' ID를 가진 버튼이 클릭되었을 때 실행되는 함수이다. 여기서 서버로 AJAX 요청이 시작된다.
		// 이 함수는 버튼이 클릭되었을 때 발생하는 이벤트를 처리하며, 비동기적으로 서버에 데이터를 요청한다.
		$.ajax({
			type: 'get', 
			// type: 'get'는 GET 방식으로 데이터를 서버에 요청하는 것을 의미한다. 이 방식은 서버에서 데이터를 가져올 때 주로 사용된다.
			// GET 방식은 데이터를 읽어올 때 주로 사용되며, 요청된 데이터는 URL에 의해 지정된 경로로부터 읽어온다. 
			
			url: '../text/text02.txt', 
			// 서버로 요청할 파일 경로를 지정한다. 이 경로는 현재 페이지의 상대 경로로 설정되어 있으며, 요청된 파일은 서버에서 제공하는 텍스트 파일이다.
			// 파일 경로는 상대 경로로 설정되었으며, 현재 문서에서 ../을 사용하여 상위 디렉토리로 이동한 후 'text/text02.txt' 파일을 요청한다.
			// 상대 경로는 현재 문서의 위치에 기반하여 서버에서 해당 파일을 찾기 때문에, 파일 경로가 올바른지 확인하는 것이 중요하다.
			
			dataType: 'text', 
			// 서버로부터 받을 데이터의 형식을 지정하는 옵션이다. 이 경우 'text'로 설정했으므로 서버로부터 순수한 텍스트 데이터를 받을 것이다.
			// 이 설정은 jQuery에게 서버에서 전송된 데이터를 텍스트로 처리하게 만든다. 만약 JSON을 받는다면 'json'으로 설정할 수 있다.
			// dataType 옵션은 서버 응답 데이터를 어떻게 처리할지를 결정하는 중요한 옵션으로, 'text', 'json', 'xml' 등이 설정될 수 있다.
			
			success: function(data){
				// 요청이 성공했을 때 실행되는 콜백 함수이다. 서버에서 반환된 데이터는 'data' 변수에 저장된다.
				// 여기서 'data'는 서버에서 응답한 텍스트 데이터이며, 이 데이터는 이후 브라우저 화면에 출력될 것이다.
				// 이 콜백 함수는 서버로부터 데이터를 성공적으로 받아왔을 때 실행되며, 받은 데이터를 DOM에 반영하는 역할을 한다.
				
				// $('#result').text(data);
				// .text() 메소드는 텍스트로 데이터를 출력하는 메소드이다. 주석 처리되어 사용되지 않는다. 이 메소드는 HTML 태그를 해석하지 않고 텍스트로 그대로 출력한다.
				// .text() 메소드는 텍스트만을 출력하며, HTML 태그를 포함한 데이터를 넣으면 태그가 그대로 출력된다.
				
				// $('#result').html(data);
				// .html() 메소드는 데이터를 HTML 형식으로 출력하는 메소드로, HTML 태그를 포함한 데이터를 삽입할 수 있다. 주석 처리되어 사용되지 않는다.
				// .html() 메소드는 HTML을 삽입하며, 데이터를 마치 HTML로 파싱하여 처리한다. 따라서 HTML 태그가 포함된 데이터를 삽입할 때 유용하다.
				
				$('#result').append(data);
				// .append() 메소드는 기존 HTML 내용 뒤에 새로운 데이터를 추가하는 메소드이다. 이 경우, 서버에서 받아온 데이터가 'result' div의 기존 내용 뒤에 추가된다.
				// 예를 들어, 여러 번 버튼을 클릭하면 새로운 데이터가 기존 데이터 뒤에 계속 추가된다.
				// 이 방식은 기존 내용이 사라지지 않고 데이터가 계속해서 추가되므로, 데이터를 여러 번 출력하거나 누적할 때 유용하다.
			},
			
			error: function(e){
				// 요청이 실패했을 때 실행되는 콜백 함수이다. 서버 오류나 경로 문제 등으로 인해 데이터를 불러오지 못했을 경우 이 함수가 호출된다.
				// e 객체는 에러에 대한 정보를 담고 있으며, 개발자는 이를 통해 에러 원인을 디버깅할 수 있다.
				// error 콜백 함수는 요청이 실패한 경우 (예: 파일이 존재하지 않거나 서버가 응답하지 않는 경우) 실행된다.
				
				console.log(e); 
				// 콘솔에 에러 메시지를 출력하여, 개발자가 어떤 오류가 발생했는지 확인할 수 있도록 한다.
				// e 객체를 통해 서버의 응답 상태나 네트워크 오류에 대한 정보를 확인할 수 있다. 이를 통해 문제를 해결하거나 로그를 기록할 수 있다.
			}
		});
	});
});
</script>
</body>
</html>
