<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<style type="text/css">
* { 
   padding: 0; 
   margin: 0; 
   color: #333;
   /* 모든 요소의 기본 패딩과 마진을 제거하고, 텍스트 색상을 설정합니다. */
   /* 이 부분은 모든 HTML 요소에 기본적으로 적용되는 스타일로, 페이지의 일관성을 유지하기 위해 사용됩니다. */
}
   
body { 
   padding: 20px 30px;
   /* body 요소에 20px 위아래 패딩과 30px 좌우 패딩을 설정합니다. */
   /* 페이지의 외부 여백을 설정하여 텍스트와 요소가 화면의 경계에 너무 가까이 붙지 않도록 합니다. */
}

#login fieldset {
   width: 270px; 
   padding: 15px;
   border: 1px solid #7BAEB5;
   position: relative;
   /* 로그인 폼의 fieldset 요소에 대한 스타일 설정: 너비, 패딩, 테두리, 위치 설정 */
   /* fieldset은 폼 요소들을 그룹화하는 역할을 하며, 여기서는 270px의 고정 너비와 15px의 내부 여백(padding)을 갖습니다. 테두리(border)는 연한 청록색(#7BAEB5)으로 설정되어 있습니다. */
}
      
#login fieldset legend {
   display: none;
   /* fieldset의 legend 요소는 화면에 표시되지 않도록 설정합니다. */
   /* legend는 fieldset의 제목 역할을 하지만, 여기서는 시각적으로 표시하지 않도록 설정되어 있습니다. 이는 화면 읽기 프로그램을 위한 의미적 요소로 남겨둔 것입니다. */
}

#login label {
   display: inline-block;
   width: 80px;
   font-size: 14px;
   font-weight: bold;
   padding-left: 10px;
   margin-bottom: 10px;
   /* 각 label 요소에 대한 스타일 설정: 레이블 너비, 글자 크기 및 두께, 패딩, 마진 설정 */
   /* label은 입력 필드와 연결되어 있으며, 사용자가 어떤 정보를 입력해야 하는지 명확히 보여줍니다. 80px의 고정 너비와 14px의 글자 크기, 그리고 굵은 글꼴을 사용합니다. */
}

#login input[type='text'], #login input[type='password'] {
   border: 1px solid #ccc;
   padding: 3px 10px;
   width: 150px;
   vertical-align: middle;
   font-size: 12px;
   line-height: 150%;
   /* 텍스트와 비밀번호 입력 필드에 대한 스타일 설정: 테두리, 패딩, 너비, 수직 정렬, 글자 크기 및 줄 간격 설정 */
   /* 입력 필드는 1px의 연한 회색(#ccc) 테두리를 가지며, 150px의 고정 너비를 가집니다. 글자 크기는 12px이며, 줄 간격(line-height)을 150%로 설정하여 가독성을 높였습니다. */
}

#login input[type='submit'] { 
   width: 270px;
   height: 20px;
   /* 로그인 버튼의 너비와 높이를 설정합니다. */
   /* 버튼은 270px의 너비로, 폼의 fieldset 너비와 동일하게 설정되어 있으며, 20px의 고정 높이를 가집니다. */
}

.active {
   border: 1px solid #f00 !important;
   background-color: skyblue;
   /* 포커스된 입력 필드에 대해 빨간 테두리와 하늘색 배경을 설정합니다. */
   /* .active 클래스는 입력 필드가 포커스를 받을 때 적용되며, 이 클래스가 적용되면 필드의 테두리가 빨간색(#f00)으로, 배경이 하늘색으로 바뀝니다. !important는 이 스타일이 다른 스타일보다 우선하도록 만듭니다. */
}

#login {
   position: relative;
   /* 로그인 폼의 위치를 상대적으로 설정합니다. 이로 인해 내부 요소의 절대 위치가 기준이 됩니다. */
   /* 이 설정은 폼 내부의 요소들이 폼 자체를 기준으로 배치되도록 만듭니다. 예를 들어, .loader 요소가 폼 내부에 절대적으로 위치할 수 있게 합니다. */
}

#login fieldset .loader {
   position: absolute;
   left: 0;
   top: 0;
   width: 100%;
   height: 100%;
   background-color: rgba(0, 0, 0, 0.3);
   display: none;
   /* 로그인 진행 중 로딩 이미지를 표시하는 영역에 대한 스타일 설정: 절대 위치, 크기, 반투명 배경, 기본적으로 숨김 처리 */
   /* .loader 요소는 폼이 제출된 후 로그인 과정이 진행 중일 때 표시됩니다. 위치는 폼 내의 맨 위(left: 0, top: 0)에 설정되며, 100% 크기로 폼 전체를 덮습니다. 배경은 반투명 검정(rgba(0, 0, 0, 0.3))으로 설정되어 사용자가 다른 작업을 하지 않도록 합니다. */
}

#login .loader img {
   position: absolute;
   left: 50%;
   top: 50%;
   margin-left: -5px;
   margin-top: -5px;
   /* 로딩 이미지를 중앙에 배치하기 위한 스타일 설정: 위치를 절대값으로 설정하고, 중앙에 배치 */
   /* 로딩 이미지는 .loader 요소의 중앙에 위치하도록 설정됩니다. left와 top을 50%로 설정하고, margin-left와 margin-top을 -5px로 설정하여 이미지를 정확히 중앙에 맞춥니다. */
}

#idDiv, #pwdDiv {
	color: red;
	font-size: 9pt;
	font-weight: bold;
   /* 아이디와 비밀번호 검증 오류 메시지에 대한 스타일 설정: 글자색, 크기 및 두께 */
   /* 입력 오류 메시지는 빨간색으로 설정되어 사용자의 주의를 끕니다. 글자 크기는 9pt로 작게 설정되었으며, 굵은 글꼴이 사용됩니다. */
}
</style>
</head>
<body>
	<form id="login">
		<fieldset>
			<legend>로그인</legend>
			<!-- fieldset의 legend는 시각적 요소가 아닌 의미적 요소로, 여기에 "로그인"이라는 제목이 있지만 표시되지 않도록 설정되어 있습니다. -->
			<!-- legend 요소는 일반적으로 fieldset의 제목을 표시하지만, 여기서는 시각적으로 숨겨져 있습니다. 이는 화면 읽기 프로그램에 의미를 제공하기 위해 남겨둔 것입니다. -->
			<div>
				<label for="user_id">아이디</label>
				<!-- '아이디'라는 텍스트가 입력 필드 앞에 나타나도록 설정 -->
				<!-- label 요소는 사용자가 입력해야 할 정보(아이디)를 명확히 나타냅니다. for 속성은 해당 입력 필드(id="user_id")와 연결하여 클릭 시 해당 필드에 포커스가 가도록 합니다. -->
				<input type="text" name="user_id" id="user_id" />
				<!-- 사용자가 아이디를 입력할 수 있는 텍스트 필드. name 속성으로 'user_id'가 서버로 전송됨. id는 label과 연결 -->
				<!-- 이 텍스트 필드는 사용자가 아이디를 입력하는 곳이며, name="user_id"로 설정되어 서버에 제출될 때 'user_id'라는 이름으로 데이터가 전송됩니다. id="user_id"는 label과의 연결을 위해 사용됩니다. -->
				<div id="idDiv"></div>
				<!-- 아이디 검증 오류 메시지를 표시할 영역 -->
				<!-- 이 div 요소는 아이디 입력에 오류가 발생했을 때, 그 오류 메시지를 출력하는 영역으로 사용됩니다. -->
			</div>
			<div>
				<label for="user_password">비밀번호</label>
				<!-- '비밀번호'라는 텍스트가 입력 필드 앞에 나타나도록 설정 -->
				<!-- 이 label 요소는 사용자가 비밀번호를 입력해야 함을 명시합니다. for="user_password"는 해당 필드(id="user_password")와 연결됩니다. -->
				<input type="password" name="user_password" id="user_password" />
				<!-- 사용자가 비밀번호를 입력할 수 있는 텍스트 필드. name 속성으로 'user_password'가 서버로 전송됨. id는 label과 연결 -->
				<!-- 이 입력 필드는 사용자가 비밀번호를 입력할 수 있는 곳입니다. 비밀번호 입력 시 화면에 문자가 표시되지 않으며, 서버로 전송될 때 'user_password'라는 이름으로 전송됩니다. -->
				<div id="pwdDiv"></div>
				<!-- 비밀번호 검증 오류 메시지를 표시할 영역 -->
				<!-- 이 div 요소는 비밀번호 입력에 오류가 발생했을 때 그 오류 메시지를 표시하는 영역입니다. -->
			</div>
			<div>
				<input type="submit" value="로그인"/>			
				<!-- 사용자가 로그인 요청을 제출할 때 클릭하는 버튼. 버튼 클릭 시 폼이 서버로 제출됩니다. -->
				<!-- 이 버튼을 클릭하면 폼에 입력된 데이터가 서버로 제출됩니다. value 속성은 버튼에 표시되는 텍스트("로그인")를 정의합니다. -->
			</div>
			<div class="loader">
				<img src="../image/loader.gif"/>
				<!-- 로그인 처리 중 표시되는 로딩 애니메이션 이미지. AJAX 요청 중에만 표시되도록 설정 -->
				<!-- 이 이미지 요소는 AJAX 요청 중에 로딩 중임을 사용자에게 알리기 위해 사용됩니다. src 속성은 로딩 이미지를 불러오는 경로를 지정합니다. -->
			</div>
		</fieldset>
	</form>

<!-- jQuery 라이브러리 로드 -->
<script type="text/javascript" src="http://code.jquery.com/jquery-3.7.1.min.js"></script>
<!-- 최신 버전의 jQuery 라이브러리를 로드합니다. jQuery는 DOM 조작, 이벤트 처리, AJAX 요청 등을 간단하게 할 수 있게 해주는 라이브러리입니다. -->

<script type="text/javascript">
$(function(){
	$('#user_id, #user_password').bind({
		'focus': function(){
			$(this).addClass('active');
			/* 입력 필드가 포커스를 받을 때 'active' 클래스를 추가하여 스타일을 변경합니다. 이때 테두리 색상과 배경색이 변경됩니다. */
			/* 사용자가 텍스트 필드에 포커스를 주면, 해당 필드에 'active' 클래스가 추가되어 테두리와 배경색이 변경됩니다. 이를 통해 사용자는 현재 포커스가 어디에 있는지 시각적으로 확인할 수 있습니다. */
		},
		'blur': function(){
			$(this).removeClass('active');
			/* 입력 필드에서 포커스가 벗어날 때 'active' 클래스를 제거하여 원래 스타일로 되돌립니다. 이때 테두리 색상과 배경색이 초기 상태로 돌아갑니다. */
			/* 사용자가 입력 필드의 포커스를 잃으면, 'active' 클래스가 제거되어 필드가 원래 스타일로 돌아갑니다. 이는 사용자가 다른 필드로 이동할 때 현재 입력 중인 필드를 시각적으로 구분할 수 있도록 도와줍니다. */
		},
	});
	
	$('#login').bind('submit', function(){
		$('#idDiv').empty();
		$('#pwdDiv').empty();
		/* 로그인 폼이 제출되기 전에 이전에 출력된 오류 메시지를 모두 지웁니다. 오류 메시지 영역을 비워 새로운 메시지가 추가될 수 있도록 준비합니다. */
		/* 폼이 제출되기 전에 아이디와 비밀번호 입력 오류 메시지를 출력하는 div 요소들을 비웁니다. 이를 통해 폼이 재제출될 때 이전 오류 메시지가 남아있지 않도록 합니다. */
		
		var user_id = $('input[name="user_id"]').val();
		/* 입력된 아이디를 변수에 저장합니다. */
		/* 사용자가 입력한 아이디 값을 가져와서 변수 user_id에 저장합니다. */
		if(!user_id) {
			$('#idDiv').text('아이디 입력');
			/* 아이디가 입력되지 않았을 경우, idDiv에 오류 메시지를 출력하고 포커스를 해당 필드로 이동시킵니다. */
			/* 만약 아이디 필드가 비어있으면, idDiv에 '아이디 입력'이라는 오류 메시지를 출력하고, 아이디 필드에 포커스를 맞춥니다. */
			$('input[name="user_id"]').focus();
			return false;
			/* 폼 제출을 중단하여 폼이 서버로 전송되지 않도록 합니다. */
			/* 아이디가 입력되지 않으면 폼 제출을 멈추고 서버로 데이터가 전송되지 않도록 합니다. */
		}//if
		
		var user_password = $('input[name="user_password"]').val();
		/* 입력된 비밀번호를 변수에 저장합니다. */
		/* 사용자가 입력한 비밀번호 값을 가져와서 변수 user_password에 저장합니다. */
		if(!user_password) {
			$('#pwdDiv').text('비밀번호 입력');
			/* 비밀번호가 입력되지 않았을 경우, pwdDiv에 오류 메시지를 출력하고 포커스를 해당 필드로 이동시킵니다. */
			/* 만약 비밀번호 필드가 비어있으면, pwdDiv에 '비밀번호 입력'이라는 오류 메시지를 출력하고, 비밀번호 필드에 포커스를 맞춥니다. */
			$('input[name="user_password"]').focus();
			return false;
			/* 폼 제출을 중단하여 폼이 서버로 전송되지 않도록 합니다. */
			/* 비밀번호가 입력되지 않으면 폼 제출을 멈추고 서버로 데이터가 전송되지 않도록 합니다. */
		}//if
		
		$('#login .loader').show();
		/* 모든 검증이 완료되면 로딩 이미지를 표시합니다. 로딩 이미지는 로그인 처리 중 사용자에게 대기 상태를 알리기 위해 사용됩니다. */
		/* 아이디와 비밀번호가 모두 입력된 경우, 로그인 처리 중임을 알리기 위해 로딩 애니메이션을 화면에 표시합니다. */
		
		$.post(
				//'../login/login.jsp',
				'../login/login_JSTL.jsp',
			   //{ 'user_id': user_id, 'user_password': user_password },
			   $(this).serialize(),
			   /* 폼 데이터를 직렬화하여 서버에 전송합니다. serialize() 함수는 폼의 입력 데이터를 URL 인코딩 형식으로 변환합니다. */
			   /* 폼 데이터를 직렬화하여 서버에 전송합니다. serialize() 함수는 폼의 모든 데이터를 URL 인코딩 형식으로 변환하여 전송에 적합한 형태로 만듭니다. */
			   function(data){
				   let message = $(data).find('message').text();
				   /* 서버에서 반환된 XML 데이터에서 'message' 태그의 내용을 찾아 변수에 저장합니다. */
				   /* 서버에서 반환된 데이터를 받아서, 그 안에서 'message' 태그를 찾아 메시지 내용을 추출하여 변수 message에 저장합니다. */
				   alert(message);
				   /* 저장된 메시지를 경고창으로 출력하여 사용자가 로그인 상태를 알 수 있도록 합니다. */
				   /* 추출한 메시지를 경고창(alert)으로 사용자에게 보여줍니다. 이 메시지는 서버에서 전송된 정보로, 로그인 성공 또는 실패 메시지가 될 수 있습니다. */
			   }).fail(function(){
				   alert('로그인 실패하였습니다. 다시 로그인 하세요'); //404
				   /* 요청이 실패하면 경고창을 통해 로그인 실패 메시지를 출력합니다. 이때 404 같은 서버 오류에 대한 대응으로 사용됩니다. */
				   /* 서버 요청이 실패한 경우, 사용자에게 실패 메시지를 경고창으로 보여줍니다. 이 메시지는 서버 문제 또는 잘못된 로그인 정보로 인해 요청이 실패했음을 알립니다. */
			   }).always(function(){
				   $('#login .loader').hide();
				   /* 요청 완료 후 로딩 이미지를 숨깁니다. 성공 또는 실패 여부에 상관없이 AJAX 요청이 끝나면 로딩 이미지를 제거합니다. */
				   /* AJAX 요청이 완료되면(성공 또는 실패 여부와 상관없이) 로딩 이미지를 숨겨 사용자에게 더 이상 기다리지 않아도 됨을 알립니다. */
			   });
		
		return false;
		/* 폼 제출을 중단하여 페이지가 리로드되지 않도록 합니다. 폼이 서버로 전송된 후 페이지를 새로고침하지 않도록 합니다. */
		/* 이 반환값은 폼 제출을 멈추게 하여 페이지가 새로 고침되지 않도록 합니다. 폼이 전송된 후에도 페이지 상태를 유지할 수 있도록 합니다. */
	});
});
</script>
</body>
</html>

<!-- 
1. 
$.ajax({
  url: 'URL',
  type: 'POST',
  data: 서버로 보내는 데이터,
  datatype: 'text' / 'xml' / 'json' 서버로부터 받는 데이터 타입
})
.done(function(data, textStatus, xhr) { });
.fail(function(xhr, textStatus, errorThrown) { });
.always(function(data|xhr, textStatus, xhr|errorThrown) { });
.then(function(data, textStatus, xhr|errorThrown) { });

※ https://string.tistory.com/128 참조

/* 위의 코드는 jQuery의 AJAX 메서드를 사용하여 서버와 비동기적으로 데이터를 주고받는 방법을 보여줍니다. */
   /* `url` 속성은 데이터를 보낼 서버의 URL을 지정합니다. */
   /* `type` 속성은 요청 방식을 지정합니다. POST 또는 GET 방법 중 하나를 사용할 수 있으며, POST는 데이터를 서버로 전송할 때 사용됩니다. */
   /* `data` 속성은 서버로 전송할 데이터를 지정합니다. 이 데이터는 보통 JSON 또는 쿼리 스트링 형식으로 전송됩니다. */
   /* `datatype` 속성은 서버에서 응답으로 받을 데이터의 형식을 지정합니다. 예를 들어, `text`, `json`, `xml` 등을 사용할 수 있습니다. */
   /* `.done()` 메서드는 서버 요청이 성공적으로 완료된 후 실행될 콜백 함수를 지정합니다. */
   /* `.fail()` 메서드는 서버 요청이 실패했을 때 실행될 콜백 함수를 지정합니다. */
   /* `.always()` 메서드는 요청의 성공 또는 실패 여부와 관계없이 항상 실행될 콜백 함수를 지정합니다. */
   /* `.then()` 메서드는 요청이 완료된 후 추가 작업을 처리할 때 사용됩니다. `.done()`과 비슷하지만, 주로 추가적인 비동기 작업을 처리할 때 사용됩니다. */

2. $(this).serialize()
- 데이터를 보내기 위해 폼 요소 집합을 문자열로 인코딩한다.
- 표준 URL-encoded 표기법으로 텍스트 문자열을 만든다.
- 폼 요소 집합을 표현하는 jQuery 객체를 이용한다.
  $('form').submit(
   function() {
      alert($(this).serialize());
      return false;
    }
  );
- 표준형태의 쿼리스트링을 만든다.
  => a=1&b=2&c=3&d=4

/* `$(this).serialize()`는 폼의 모든 입력 데이터를 문자열로 인코딩하여 URL 쿼리 스트링 형식으로 변환하는 jQuery 메서드입니다. */
   /* 폼 데이터를 서버로 전송하기 전에 모든 입력 필드를 가져와 하나의 문자열로 만듭니다. */
   /* 이 문자열은 URL 인코딩되어 있으며, 서버로 쉽게 전송할 수 있는 형식입니다. */
   /* 예를 들어, `a=1&b=2&c=3`과 같은 형식으로 변환되며, 각 키-값 쌍은 앰퍼샌드(&)로 구분됩니다. */
   /* `$('form').serialize()`는 폼의 모든 데이터를 포함하는 URL-encoded 문자열을 반환하므로, 서버로 데이터 전송 시 매우 유용합니다. */
 -->

